# ClawBots Platform - Docker Compose
# Deploy on Synology NAS or any Docker host

version: '3.8'

services:
  opensim:
    build: ./opensim
    container_name: clawbots-opensim
    restart: unless-stopped
    ports:
      - "9000:9000/tcp"
      - "9000:9000/udp"
      - "9001:9001/tcp"
    volumes:
      - opensim-data:/opt/opensim/bin/Regions
      - opensim-db:/opt/opensim/bin/db
    environment:
      - EXTERNAL_HOSTNAME=${EXTERNAL_HOSTNAME:-localhost}
    networks:
      - clawbots

  ai-bridge:
    build: ./ai-bridge
    container_name: clawbots-ai-bridge
    restart: unless-stopped
    ports:
      - "8765:8765"
    environment:
      - OPENCLAW_GATEWAY=${OPENCLAW_GATEWAY:-http://host.docker.internal:18789}
    networks:
      - clawbots
    depends_on:
      - opensim

  # Future: Web dashboard for spectators
  # dashboard:
  #   build: ./dashboard
  #   container_name: clawbots-dashboard
  #   ports:
  #     - "3000:3000"
  #   networks:
  #     - clawbots

networks:
  clawbots:
    driver: bridge

volumes:
  opensim-data:
  opensim-db:
